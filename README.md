# finance_bot

Телеграм бот для контроля расходов и доходов.

На этом этапе происходит рефакторинг и миграция с aiogram 2.x на версию aiogram 3.x
Также полностью удален сервис google sheets, вместо него внедряется postgresql 14

Ветка нестабильная, бот может запускаться, но функционал полность отсутствует.

# TELEGRAM FINANCE BOT

## Введение
Телеграм бот для учета ежедневных расходов позволяет пользователям отслеживать их финансовые транзакции по заранее определенным категориям. Бот также предоставляет возможность записывать траты без указания категории с дополнительными пояснениями.

## Архитектура приложения

### Текущая архитектура
Приложение разработано на языке Python с использованием фреймворка aiogram. В качестве базы данных используется Google Sheets, которая хранит все пользовательские данные и статистику.

### Планы на миграцию
Текущий план включает переход с Google Sheets на PostgreSQL версии 14 и миграцию с aiogram 2.x на aiogram 3.x.

## Репозиторий на GitHub
Исходный код доступен на GitHub по адресу: https://github.com/sdkinfotech/finance_bot.git

## Рефакторинг

### Структура проекта до изменений
Перед внесением изменений необходимо оценить и реорганизовать структуру проекта, включая файловую структуру и исходный код.

### Удаление зависимости от Google Sheets
Основной задачей является удаление всех элементов, связанных с Google Sheets, и подготовка к использованию PostgreSQL.

## Миграция на aiogram 3.x

### Изменение импортов
Необходимо обновить импорты в соответствии с изменениями в aiogram версии 3.x.

### Переписывание запуска и хендлеров
Приложение должно быть обновлено для использования новых паттернов и структур aiogram 3.x.

## Тестирование
После каждого этапа рефакторинга и миграции необходимо проводить тестирование для убеждения в стабильности функционала.

## Создание тестовой БД

### Файл init_db.sql
Необходимо разработать структуру и скрипты для инициализации базы данных PostgreSQL.

## Работа с Git

### Создание ветки migration и работа с ней
Для сохранения этапов миграции необходимо использовать отдельную ветку `migration` в Git.

### Файл .gitignore
В файл `.gitignore` необходимо добавить следующие строки:

Byte-compiled / optimized / DLL files

pycache/ *.py[cod] *$py.class
Caching directories

bot/pycache/
Environments

.env venv/ ENV/
Editor directories and files

.vs/ *.suo *.user *.userprefs *.sln.docstates
Ignore all in the root .vs directory

.vs/*

### Commit и push изменений
После внесения изменений в проект, их следует зафиксировать командой `commit` и отправить на удаленный сервер с помощью `push`.

## Заключение
Работа над проектом включает большой объем рефакторинга, миграцию технологий и создание новой структуры базы данных. После успешной реализации данных шагов, проект будет готов к дальнейшей разработке и внедрению нового функционала.




https://zen.yandex.ru/video/watch/6288b1f2ca007263a781516d 
демонстрационное видео на старую версию бота в стабильной ветке main
